<?xml version="1.0" encoding="UTF-8"?>
<LightningComponentBundle xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>62.0</apiVersion>
    <isExposed>true</isExposed>
    <masterLabel>Deep Related List</masterLabel>
    <description>Produces a table of records, similar to the "Related List - Single" component, but it supports more levels of relationship between the displayed records and parent record. Â© 2025 Alon Waisman, https://github.com/MowAlon</description>
    <targets>
        <target>lightning__RecordPage</target>
    </targets>

    <targetConfigs>
        <targetConfig targets="lightning__RecordPage">
            <property name="title"                    label="Title"                                                        type="String"  required="false" placeholder="Title"                                                                           description="Title to appear at the top of the component" />
            <property name="iconName"                 label="Icon Name"                                                    type="String"  required="false"                                                                                               description="Exact string to use for icon-name attribute, like 'utility:knowledge_base' (see https://lightningdesignsystem.com/icons)" />
            <property name="parentRecordRelationship" label="Relationship to Parent Record from Current Record (Optional)" type="String"  required="false"                                                                                               description="API Name of a Lookup field, SOQL-formatted. If you provide a parent record, like Parent__r.Grandparent_ID__c, a related list of that record displays instead of a related list of the current record." />
            <property name="objectName"               label="Object API Name of Listed Records"                            type="String"  required="true" />
            <property name="relationship"             label="Relationship to Parent Record from Related List Records"      type="String"  required="true"                                                                                                description='Relationship from listed object to parent using SOQL relationship format. For example, relating a child record to its grandparent: "Parent__r.Grandparent__c"' />
            <property name="columnInfo"               label="Column Info"                                                  type="String"  required="true"  placeholder="Id::Custom Label::Name, Custom_Field__c, Parent__c::Parent Name::Parent__r.Name" description="Comma-separated groups of data in a special format - up to three strings in each group, separated by a double-colon, like this: Field_API_Name::Custom_Column_Label::Display_Field_API_Name_For_ID_Field. The first element is required. If it's not a reference (aka Lookup) field, and you want to use the standard label, that's all you need. The second element is for a custom column label. If the field identified in the first element is a reference field, you must include both the second and third elements - the second is either a custom label or ** to indicate using its standard label, and the third element is the URL Mask (aka the API Name of the Field that should display in place of the actual ID value that will link to that record's detail page). All API Names can be any accessible field from any object in the relationship chain. EXAMPLE of three columns: Id::Custom Label::Name, Custom_Field__c, Parent__c::Parent Name::Parent__r.Name" />
            <property name="filtersCSV"               label="Filters (CSV, can use $recordId)"                             type="String"  required="false"                                                                                               description="Comma-separated list of filter conditions that will always be active. Use '$recordId' to reference the parent record's ID value. Assuming you keep 'Limit results to this record's relations' checked, results are automatically filtered to only include those with a relationship to the parent record." />
            <property name="defaultSortField"         label="Initial Sort Field"                                           type="String"  required="false"                                                                                               description="Sets the initial column to sort. Use the full SOQL API Name (like Parent__r.Grandparent__r.Field__c) of the underlying field - meaning, don't use the displayed field if the data is masked by another (like an ID field masked by the Name field and linked to a record)." />
            <property name="defaultSortOrder"         label="Initial Sort Order"                                           type="String"  required="false" datasource="Ascending,Descending" />
            <property name="pageSize"                 label="Page Size"                                                    type="Integer" required="false" default="10"    description="Number of records per page." />
            <property name="showRowNumbers"           label="Show Row Numbers"                                             type="Boolean" required="false" default="true"  description="Adds row numbers." />
            <property name="hidePagination"           label="No Pagination"                                                type="Boolean" required="false" default="false" description="Hides pagination." />
            <property name="recordPageFilter"         label="Limit results to Parent Record's relations"                   type="Boolean" required="false" default="true"                                                                                description="Filters results so only records with a relationship to the parent record are included (Relationship_Field__c = $recordId). In rare situations, it may be useful not to include this filter and manually apply something similar." />
        </targetConfig>
    </targetConfigs>

</LightningComponentBundle>
